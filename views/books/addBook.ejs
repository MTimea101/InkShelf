<!DOCTYPE html>
<html>
<head>
  <title>Add New Book</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="add-book-page">
    <div class="container">
      <div class="add-book-simple">
        <div class="page-header">
          <h1>Add New Book</h1>
          <p>Fill in the details to add a new book to the library</p>
        </div>

        <!-- Form -->
        <div class="form-container">
          <% if (error) { %>
            <div class="alert alert-danger alert-dismissible fade show mb-4">
              <%= error %>
              <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
          <% } %>

          <form method="POST" action="/add-book" enctype="multipart/form-data">
            
            <div class="form-row">
              <div class="form-group">
                <label for="isbn" class="form-label">ISBN *</label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="isbn" 
                  name="isbn" 
                  placeholder="e.g., 978-0123456789"
                  required
                >
              </div>

              <div class="form-group">
                <label for="title" class="form-label">Book Title *</label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="title" 
                  name="title" 
                  placeholder="Enter book title"
                  required
                >
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="author" class="form-label">Author *</label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="author" 
                  name="author" 
                  placeholder="Enter author name"
                  required
                >
              </div>

              <div class="form-group">
                <label for="year" class="form-label">Publication Year *</label>
                <input 
                  type="number" 
                  class="form-control" 
                  id="year" 
                  name="year" 
                  placeholder="e.g., 2023"
                  min="1000" 
                  max="2030"
                  required
                >
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="copies" class="form-label">Number of Copies *</label>
                <input 
                  type="number" 
                  class="form-control" 
                  id="copies" 
                  name="copies" 
                  placeholder="Available copies"
                  min="1"
                  max="1000"
                  required
                >
              </div>

              <div class="form-group">
                <label for="categories" class="form-label">Categories</label>
                <input 
                  type="text" 
                  class="form-control" 
                  id="categories" 
                  name="categories" 
                  placeholder="fantasy, adventure, science fiction"
                >
                <small class="text-muted">Separate multiple categories with commas</small>
              </div>
            </div>

            <!-- Cover Image Upload -->
            <div class="form-group">
              <label class="form-label">Cover Image (Optional)</label>
              <div class="upload-area" id="uploadArea">
                <input 
                  type="file" 
                  class="file-input-hidden" 
                  id="cover" 
                  name="cover" 
                  accept="image/*"
                >
                <div class="upload-content">
                  <div class="upload-icon-simple">üìÅ</div>
                  <h5>Drag & Drop or Click to Upload</h5>
                  <p class="text-muted mb-0">Supports: JPG, PNG, GIF (Max: 5MB)</p>
                </div>
                <div class="preview-container" id="previewContainer" style="display: none;">
                  <img id="previewImage" class="preview-image" alt="Preview" style="max-width: 200px; border-radius: 10px;">
                  <p class="mt-2 mb-0">
                    <button type="button" class="btn btn-sm btn-outline-danger" id="removeImage">
                      Remove Image
                    </button>
                  </p>
                </div>
              </div>
            </div>

            <!-- Summary -->
            <div class="form-group">
              <label for="summary" class="form-label">Summary</label>
              <textarea 
                class="form-control" 
                id="summary" 
                name="summary" 
                rows="4" 
                placeholder="Write a brief summary of the book (optional)"
              ></textarea>
            </div>

            <!-- Submit Buttons -->
            <div class="d-flex gap-3 justify-content-center mt-4">
              <button type="submit" class="btn btn-primary-custom">
                Save Book to Library
              </button>
              <a href="/" class="btn btn-outline-secondary">
                Back to Library
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/enhanced-ui.js"></script>
  <script src="/js/addBook.js"></script>
</body>
</html>
